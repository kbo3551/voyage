<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.gdu.voyage.mapper.CouponMapper">
	
	<resultMap type="com.gdu.voyage.vo.Coupon" id="coupon">
		<result column="coupon_no" property="couponNo" />
		<result column="coupon_name" property="couponName" />
		<result column="coupon_terms" property="couponTerms" />
		<result column="coupon_discount" property="couponDiscount" />
		<result column="deadline" property="deadLine" />
		<result column="coupon_state" property="couponState" />
		<result column="create_date" property="createDate" />
	</resultMap>
	<!-- 쿠폰list -->
	<select id="selectCouponList" parameterType="com.gdu.voyage.vo.Coupon" resultMap="coupon">
	SELECT
		coupon_no,
		coupon_name,
		coupon_terms,
		coupon_discount,
		deadline,
		coupon_state,
		create_date
	FROM
		coupon
	LIMIT	
		#{beginRow}, #{rowPerPage}
	</select>
	<!-- 쿠폰 수 -->
	<select id="couponTotalCount" resultType="int" parameterType="com.gdu.voyage.vo.Coupon">
	SELECT
		COUNT(*)
	FROM
		coupon
	</select>
	<!-- 쿠폰 생성 -->
	<insert id="insertCoupon" parameterType="com.gdu.voyage.vo.Coupon">
	INSERT INTO 
		coupon(
		coupon_name,
		coupon_terms,
		coupon_discount,
		deadline,
		create_date
		)
	 VALUES(
	 	#{couponName},
	 	#{couponTerms},
	 	#{couponDiscount},
	 	#{deadLine},
	 	NOW()
	 )
	</insert>
	<update id="updateCoupon" parameterType="com.gdu.voyage.vo.Coupon">
	UPDATE coupon
	set
	   coupon_state = #{couponState}
	WHERE
	   coupon_no = #{couponNo}
	</update>
</mapper>